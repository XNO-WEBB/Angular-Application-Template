var app = angular.module("myApplication", [ "ngRoute" ]);

app.config(function($locationProvider) {
    $locationProvider.html5Mode(!0);
}), app.config(function($routeProvider) {
    $routeProvider.when("/", {
        templateUrl: "app/components/home/homeView.html",
        controller: "homeController"
    }).when("/posts", {
        templateUrl: "app/components/posts/postsView.html",
        controller: "postsController",
        controllerAs: "posts"
    }).otherwise({
        redirectTo: "/"
    });
}), app.controller("homeController", function() {}), app.controller("postsController", function($scope) {
    var posts = this;
    posts.list = [], io.socket.get("/posts", function(resData, sw) {
        for (var key in resData) posts.list.push(resData[key]);
        $scope.$digest();
    }), io.socket.on("posts", function(msg) {
        console.log(msg.id), console.log(msg.data.title), console.log(posts.list[msg.id - 1]), 
        "updated" == msg.verb ? posts.list[msg.id - 1].title = msg.data.title : posts.list.push(msg.data), 
        $scope.$digest();
    });
}), app.controller("navbarController", function() {}), app.directive("navbar", function() {
    return {
        restrict: "E",
        templateUrl: "app/shared/navbar/navbarView.html",
        controller: "navbarController",
        controllerAs: "navbar"
    };
});